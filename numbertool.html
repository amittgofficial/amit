<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Number Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease-in-out;
    }

    body {
      background: radial-gradient(circle at top left, #101c40, #0f0c29, #302b63);
      color: #fff;
      padding: 20px;
      overflow-x: hidden;
      position: relative;
    }



    .header {
      text-align: center;
      margin-bottom: 25px;
      animation: slideDown 1s ease;
    }

    #copyBtn {
      padding: 15px 40px;
      border-radius: 50px;
      font-size: 22px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      background: linear-gradient(to right, #ff416c, #ff4b2b);
      color: white;
      box-shadow: 0 0 20px rgba(255, 65, 108, 0.8);
      animation: pulse 2s infinite;
    }

    textarea {
      width: 100%;
      height: 150px;
      background: rgba(255,255,255,0.07);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 18px;
      color: #ff4;
      padding: 15px;
      font-size: 16px;
      margin: 20px 0;
      outline: none;
      backdrop-filter: blur(8px);
      animation: fadeInUp 0.7s ease;
    }

textarea:focus {
  border: 2px solid #00ffdd;
  box-shadow: 0 0 10px #00ffdd, 0 0 20px #00ffdd;
}

/* Highlight for each history item */
.saved-entry {
  border: 2px solid #00ffdd;
  box-shadow: 0 0 8px #00ffdd;
  transition: all 0.3s ease;
}

.saved-entry:hover {
  box-shadow: 0 0 15px #00ffdd;
}

    .btn {
      background: linear-gradient(45deg, #00f2fe, #4facfe);
      padding: 12px 30px;
      font-weight: bold;
      border: none;
      border-radius: 40px;
      color: colour;
      cursor: pointer;
      margin: 10px 5px;
      box-shadow: 0 0 15px rgba(0, 242, 254, 0.6);
    }

    .btn:hover {
      transform: scale(1.06);
    }

    .card {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 20px;
      padding: 20px;
      margin: 20px 0;
      backdrop-filter: blur(12px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      animation: fadeInUp 1s ease;
    }

    .label {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 10px;
      display: block;
    }

    .copy-btn {
      background: linear-gradient(to right, #00ff87, #60efff);
      color: #fff;
      padding: 10px 20px;
      border-radius: 25px;
      border: none;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 20px rgba(96,239,255,0.5);
      margin-top: 10px;
    }

    .dup-pill {
      background: #ff1e56;
      padding: 8px 15px;
      border-radius: 25px;
      display: inline-block;
      margin: 5px;
      font-size: 14px;
    }

    #toast {
      visibility: hidden;
      min-width: 250px;
      background: linear-gradient(to right, #ff416c, #ff4b2b);
      color: white;
      text-align: center;
      border-radius: 30px;
      padding: 16px;
      position: fixed;
      z-index: 999;
      left: 50%;
      bottom: 40px;
      transform: translateX(-50%);
      font-size: 16px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    }

    #toast.show {
      visibility: visible;
      animation: fadein 0.5s, fadeout 0.5s 2.5s;
    }

    @keyframes fadein {
      from { bottom: 0; opacity: 0; }
      to { bottom: 40px; opacity: 1; }
    }

    @keyframes fadeout {
      from { bottom: 40px; opacity: 1; }
      to { bottom: 0; opacity: 0; }
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-50px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0px rgba(255,65,108,0.6); }
      50% { box-shadow: 0 0 25px rgba(255,65,108,1); }
      100% { box-shadow: 0 0 0px rgba(255,65,108,0.6); }
    }

    .bg-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: url('https://i.gifer.com/7VE.gif') center center / cover no-repeat;
      opacity: 0.05;
      pointer-events: none;
    }

    .modal-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal {
      background: #1e1e2f;
      padding: 25px;
      border-radius: 20px;
      max-width: 90%;
      color: white;
      box-shadow: 0 0 20px rgba(0,0,0,0.6);
    }

    .modal input, .modal select {
      width: 100%;
      margin: 8px 0 15px;
      padding: 10px;
      border-radius: 10px;
      border: none;
      font-size: 16px;
    }

    .btn-group {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

    .saved-entry {
      background: rgba(255,255,255,0.1);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 10px;
    }

    .saved-meta {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<div class="bg-particles"></div>

<div class="header">
  <button id="copyBtn">Number Tool</button>
</div>

<p id="textToCopy" style="display:none;">This is the text to be copied!</p>

<textarea id="numberInput" placeholder="Paste numbers here..."></textarea>
<button class="btn" onclick="processNumbers()">Filter</button>

<div class="card">
  <span class="label">‚úÖ Fresh Number: <span id="cleanCount">0</span></span>
  <input type="hidden" id="cleanOutput">
  <button class="copy-btn" onclick="copyToClipboard()">Copy</button>
  <button class="btn" onclick="saveNumbers()">üíæ Save</button>
</div>

<div class="card">
  <span class="label">‚ùå Duplicate Numbers (<span id="dupCount">0</span>):</span>
  <div id="duplicateOutput"></div>
</div>

<div class="card">
  <span class="label">üö´ Invalid Numbers (<span id="invalidCount">0</span>):</span>
  <p id="invalidOutput"></p>
</div>

<div class="card" id="historyCard">
  <span class="label">üìÇ History:</span>
  <div id="savedData"></div>
  <button class="btn" id="clearAllBtn" style="background:#c62828; margin-top: 10px;">Clear All</button>
</div>

<div class="modal-overlay" id="saveModal">
  <div class="modal">
    <h3>üíæ Save Entry</h3>
    <label>Name:</label>
    <input type="text" id="modalNameInput">
    <label>Date:</label>
    <div style="display:flex; gap: 10px;">
      <select id="modalDay" style="flex:1">
        <option disabled selected value="">Day</option>
      </select>
      <select id="modalMonth" style="flex:2">
        <option disabled selected value="">Month</option>
        <option value="Jan">Jan</option><option value="Feb">Feb</option><option value="Mar">Mar</option>
        <option value="Apr">Apr</option><option value="May">May</option><option value="Jun">Jun</option>
        <option value="Jul">Jul</option><option value="Aug">Aug</option><option value="Sep">Sep</option>
        <option value="Oct">Oct</option><option value="Nov">Nov</option><option value="Dec">Dec</option>
      </select>
    </div>
    <div class="btn-group">
      <button class="btn" onclick="closeModal()">‚ùå Cancel</button>
      <button class="btn" onclick="confirmSave()">‚úÖ Save</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="clearAllModal">
  <div class="modal">
    <h3>‚ö†Ô∏è Are you sure you want to clear all history?</h3>
    <div class="btn-group">
      <button class="btn" onclick="closeClearAllModal()">‚ùå Cancel</button>
      <button class="btn" onclick="clearAllHistory()">‚úÖ Confirm</button>
    </div>
  </div>
</div>

<div id="toast"></div>

<script>
let detectedName = "";
let saveCounter = 0;
let cleanedNumbers = "";

window.onload = () => {
  renderHistory();
  populateDays();
};

document.getElementById("copyBtn").addEventListener("click", function() {
  const textToCopy = document.getElementById("textToCopy");
  const tempInput = document.createElement("input");
  document.body.appendChild(tempInput);
  tempInput.value = textToCopy.textContent;
  tempInput.select();
  document.execCommand("copy");
  document.body.removeChild(tempInput);
  showToast("‚úÖ Text Copied!");
});

document.getElementById("clearAllBtn").addEventListener("click", function() {
  document.getElementById("clearAllModal").style.display = "flex";
});

function closeClearAllModal() {
  document.getElementById("clearAllModal").style.display = "none";
}

function clearAllHistory() {
  localStorage.removeItem("savedNumbers");
  closeClearAllModal();
  showToast("üßπ History cleared!");
  renderHistory();
}

function showToast(msg) {
  const toast = document.getElementById("toast");
  toast.textContent = msg;
  toast.className = "show";
  setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 2000);
}

function populateDays() {
  const daySelect = document.getElementById("modalDay");
  for (let i = 1; i <= 31; i++) {
    const option = document.createElement("option");
    option.value = i;
    option.textContent = i;
    daySelect.appendChild(option);
  }
}

function processNumbers() {
  const input = document.getElementById("numberInput").value.trim();
  const lines = input.split("\n");
  detectedName = "Unnamed " + (++saveCounter);

  if (lines.length && lines[0].includes(":")) {
    detectedName = lines[0].split(":")[0].trim();
    lines.shift();
  }

  const numbers = lines.join("\n").split(/[\s,]+/);
  const seen = new Set();
  const dupes = new Set();
  const invalid = [];
  const cleaned = [];

  for (let num of numbers) {
    num = num.replace(/\D/g, "");
    if (num.length === 10) {
      if (seen.has(num)) {
        dupes.add(num);
      } else {
        seen.add(num);
        cleaned.push(num);
      }
    } else if (num.length > 0) {
      invalid.push(num);
    }
  }

  document.getElementById("cleanOutput").value = cleaned.join(",");
  document.getElementById("cleanCount").textContent = cleaned.length;

  const dupDiv = document.getElementById("duplicateOutput");
  dupDiv.innerHTML = "";
  Array.from(dupes).forEach((n, i) => {
    const el = document.createElement("div");
    el.className = "dup-pill";
    el.textContent = `${i + 1}. ${n}`;
    dupDiv.appendChild(el);
  });

  document.getElementById("dupCount").textContent = dupes.size;
  document.getElementById("invalidOutput").textContent = invalid.join(", ");
  document.getElementById("invalidCount").textContent = invalid.length;
}

function copyToClipboard() {
  const val = document.getElementById("cleanOutput").value;
  if (!val) return showToast("‚ö†Ô∏è No numbers found.");
  navigator.clipboard.writeText(val).then(() => showToast("‚úÖ Copied!"));
}

function saveNumbers() {
  const val = document.getElementById("cleanOutput").value;
  if (!val) return showToast("‚ö†Ô∏è Filter numbers first.");
  cleanedNumbers = val;

  const input = document.getElementById("numberInput").value.trim();
  const lines = input.split("\n");
  if (lines.length && lines[0].includes(":")) {
    detectedName = lines[0].split(":")[0].trim();
  }

  document.getElementById("modalNameInput").value = detectedName;
  document.getElementById("modalDay").value = "";
  document.getElementById("modalMonth").value = "";
  document.getElementById("saveModal").style.display = "flex";
}

function closeModal() {
  document.getElementById("saveModal").style.display = "none";
}

function confirmSave() {
  const name = document.getElementById("modalNameInput").value.trim();
  const day = document.getElementById("modalDay").value;
  const month = document.getElementById("modalMonth").value;
  if (!name || !day || !month) return showToast("‚ö†Ô∏è Fill all fields.");

  const date = `${day} ${month}`;
  const time = new Date().toLocaleTimeString();
  const entry = { name, date, time, numbers: cleanedNumbers };

  let all = JSON.parse(localStorage.getItem("savedNumbers") || "[]");
  all.push(entry);
  localStorage.setItem("savedNumbers", JSON.stringify(all));

  closeModal();
  showToast("‚úÖ Saved!");
  renderHistory();
}

function renderHistory() {
  const saved = JSON.parse(localStorage.getItem("savedNumbers") || "[]");
  const container = document.getElementById("savedData");
  container.innerHTML = "";

  saved.reverse().forEach((item, i) => {
    const numCount = item.numbers.split(",").length;
    const div = document.createElement("div");
    div.className = "saved-entry";
    div.innerHTML = `
      <div class="saved-meta">
        <b>üî• ${numCount} Numbers</b><br>
        <b>üìõ ${item.name}</b><br>
        <b>üóìÔ∏è ${item.date}
      </div>
      <button class="copy-btn" onclick="navigator.clipboard.writeText('${item.numbers}').then(() => showToast('üìã Copied!'))">üìã Copy</button>
    `;
    container.appendChild(div);
  });
}
</script>

</body>
</html>
